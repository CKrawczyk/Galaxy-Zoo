// Generated by CoffeeScript 1.4.0
var computeStatistics,_this=this;computeStatistics=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;h=t-e,i=h/n,l=r.length,f=0,m=0,s=new Array(n+1);for(o=b=0,x=s.length;b<x;o=++b)y=s[o],v=i*o,s[o]=[v,0];for(o=w=0,T=r.length;w<T;o=++w){y=r[o];if(isNaN(y)){f+=1;continue}m+=y,o=Math.floor((y-e)/h*n),s[o][1]+=1}a=m/(l-f),m=0,d=[];for(E=0,N=r.length;E<N;E++)y=r[E],y-=e,m+=y,d.push(y);d=d.sort(),A=[.0025,.9975],u=A[0],g=A[1],p=0;for(o=S=0,C=d.length;S<C;o=++S){y=d[o],p+=y,c=p/m;if(c>u){u=d[o-1]+e;break}}p=0;for(o=L=0,k=d.length;L<k;o=++L){y=d[o],p+=y,c=p/m;if(c>g){g=d[o-1]+e;break}}return[s,a,u,g]},self.addEventListener("message",function(e){var t,n,r,i,s,o,u;return t=e.data,u=computeStatistics(t.min,t.max,t.bins,t.data),n=u[0],i=u[1],r=u[2],o=u[3],s={histogram:n,mean:i,lower:r,upper:o,band:t.band},self.postMessage(s)},!1);